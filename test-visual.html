<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerFit Visual Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 400px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { font-size: 20px; color: #333; }
        h2 { font-size: 16px; color: #666; margin-top: 30px; }
        .modal {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            padding: 20px;
            margin-bottom: 30px;
        }
        .divider {
            border-top: 2px dashed #ddd;
            margin: 40px 0;
        }
    </style>
</head>
<body>
    <h1>CareerFit Visual Test</h1>
    <p style="color: #888; font-size: 13px;">Open this file in browser to verify formatting looks correct.</p>

    <!-- Test 1: Summarize Output -->
    <h2>1. Summarize Output</h2>
    <div class="modal" id="summarize-output"></div>

    <!-- Test 2: Assess Output (Score 4 - Great Match) -->
    <h2>2. Assess Output (Score 4 - Great Match)</h2>
    <div class="modal" id="assess-output-4"></div>

    <!-- Test 3: Assess Output (Score 3 - Good Match) -->
    <h2>3. Assess Output (Score 3 - Good Match)</h2>
    <div class="modal" id="assess-output-3"></div>

    <!-- Test 4: Assess Output (Score 2 - Stretch) -->
    <h2>4. Assess Output (Score 2 - Stretch)</h2>
    <div class="modal" id="assess-output-2"></div>

    <!-- Test 5: Cached Result -->
    <h2>5. Cached Result Display</h2>
    <div class="modal" id="cached-output"></div>

    <script>
        // Simulate the formatRoleHtml function from background.js
        function formatRoleHtml(data, options = {}) {
            const { showScore = false, fitScore = null, gaps = [], isAssess = false } = options;
            const years = data.yearsRequired || 'Not specified';
            const managerType = data.managerType || '';
            const func = data.function || '';
            const uniqueReqs = data.uniqueRequirements || [];

            // Score color
            let scoreColor = '#9e9e9e';
            if (fitScore >= 4) scoreColor = '#4caf50';
            else if (fitScore >= 3) scoreColor = '#ff9800';
            else if (fitScore >= 2) scoreColor = '#ff5722';
            else if (fitScore >= 1) scoreColor = '#f44336';

            let html = `<div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.5;">`;

            // Score badge (only for Assess)
            if (showScore && fitScore !== null) {
                html += `
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid #eee;">
                        <div style="width: 56px; height: 56px; border-radius: 50%; background: ${scoreColor}; display: flex; align-items: center; justify-content: center;">
                            <span style="color: white; font-size: 24px; font-weight: 700;">${fitScore}</span>
                        </div>
                        <div>
                            <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #888;">Fit Score</div>
                            <div style="font-size: 18px; font-weight: 600; color: ${scoreColor};">${fitScore >= 4 ? 'Great Match' : fitScore >= 3 ? 'Good Match' : fitScore >= 2 ? 'Stretch' : 'Low Match'}</div>
                        </div>
                    </div>
                `;
            }

            // Role basics
            html += `
                <div style="margin-bottom: 16px;">
                    <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px;">
                        <span style="background: #e3f2fd; color: #1565c0; padding: 4px 10px; border-radius: 16px; font-size: 12px; font-weight: 500;">${years}</span>
                        ${managerType ? `<span style="background: ${managerType === 'People Manager' ? '#f3e5f5' : '#e8f5e9'}; color: ${managerType === 'People Manager' ? '#7b1fa2' : '#2e7d32'}; padding: 4px 10px; border-radius: 16px; font-size: 12px; font-weight: 500;">${managerType}</span>` : ''}
                    </div>
                    ${func ? `<p style="margin: 0; font-size: 14px; color: #555;">${func}</p>` : ''}
                </div>
            `;

            // Role requirements
            if (uniqueReqs.length > 0) {
                html += `
                    <div style="margin-bottom: 16px;">
                        <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #888; margin-bottom: 8px;">Role Looking For</div>
                        <ul style="margin: 0; padding-left: 16px;">
                            ${uniqueReqs.map(req => `<li style="font-size: 13px; color: #333; margin-bottom: 4px;">${req}</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else if (!isAssess) {
                html += `<p style="color: #888; font-style: italic; font-size: 13px;">Standard role - no specific requirements</p>`;
            }

            // Gaps with learning resources (only for Assess)
            if (isAssess && gaps.length > 0) {
                html += `
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #eee;">
                        <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #e65100; margin-bottom: 10px;">Gaps</div>
                        ${gaps.map(gap => `
                            <div style="background: #fff8e1; border-radius: 6px; padding: 10px 12px; margin-bottom: 8px;">
                                <div style="font-size: 13px; font-weight: 600; color: #333;">${gap.skill}</div>
                                <div style="font-size: 12px; color: #555; margin: 4px 0;">Learn: ${gap.resources}</div>
                                ${gap.funFact ? `<div style="font-size: 11px; color: #888; font-style: italic;">${gap.funFact}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            html += `</div>`;
            return html;
        }

        // Test Data
        const sampleData = {
            yearsRequired: '5+ years',
            managerType: 'IC',
            function: 'Product Management - Building B2B SaaS features for enterprise customers',
            uniqueRequirements: [
                'Healthcare industry experience (HIPAA compliance)',
                'SQL for data analysis',
                'Experience with Salesforce integration'
            ]
        };

        const sampleGaps = [
            {
                skill: 'HIPAA Compliance',
                resources: '"Healthcare IT Fundamentals" on Coursera',
                funFact: 'Epic Systems (HIPAA-compliant) handles 250M+ patient records in the US'
            },
            {
                skill: 'Salesforce Integration',
                resources: 'Salesforce Trailhead (free)',
                funFact: 'Slack increased enterprise deals 3x after mastering Salesforce integration'
            }
        ];

        // Render Test 1: Summarize
        document.getElementById('summarize-output').innerHTML = formatRoleHtml(sampleData);

        // Render Test 2: Assess Score 4
        document.getElementById('assess-output-4').innerHTML = formatRoleHtml(sampleData, {
            showScore: true,
            fitScore: 4,
            gaps: sampleGaps,
            isAssess: true
        });

        // Render Test 3: Assess Score 3
        document.getElementById('assess-output-3').innerHTML = formatRoleHtml(sampleData, {
            showScore: true,
            fitScore: 3,
            gaps: sampleGaps,
            isAssess: true
        });

        // Render Test 4: Assess Score 2
        document.getElementById('assess-output-2').innerHTML = formatRoleHtml(sampleData, {
            showScore: true,
            fitScore: 2,
            gaps: sampleGaps,
            isAssess: true
        });

        // Render Test 5: Cached Result
        const cachedHtml = `
            <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.5;">
                <div style="background: #fff3e0; padding: 8px 12px; border-radius: 6px; margin-bottom: 16px; font-size: 11px; color: #e65100; display: flex; justify-content: space-between; align-items: center;">
                    <span>Cached from 12/29/2024</span>
                    <button style="background: #ff9800; color: white; border: none; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 500;">Refresh</button>
                </div>
                ${formatRoleHtml(sampleData, { showScore: true, fitScore: 4, gaps: sampleGaps, isAssess: true }).replace('<div style="font-family', '<div style="font-family')}
            </div>
        `;
        document.getElementById('cached-output').innerHTML = cachedHtml;

        console.log('âœ… Visual test page rendered successfully!');
        console.log('Check all 5 sections to verify formatting looks correct.');
    </script>
</body>
</html>
